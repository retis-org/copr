--- a/Cargo.lock
+++ b/Cargo.lock
@@ -1,6 +1,6 @@
 # This file is automatically @generated by Cargo.
 # It is not intended for manual editing.
-version = 4
+version = 3
 
 [[package]]
 name = "adler2"
diff --git a/retis-events/Cargo.toml b/retis-events/Cargo.toml
index a990ac58be14..19468706f9de 100644
--- a/retis-events/Cargo.toml
+++ b/retis-events/Cargo.toml
@@ -6,6 +6,9 @@ repository.workspace = true
 homepage.workspace = true
 edition.workspace = true
 
+[lints.rust]
+unexpected_cfgs = { level = "warn", check-cfg = ['cfg(test)'] }
+
 [features]
 python = ["retis-derive/python"]
 python-embed = ["python", "pyo3/auto-initialize"]
diff --git a/retis/Cargo.toml b/retis/Cargo.toml
index feb6ca01e33d..7da07a6465ac 100644
--- a/retis/Cargo.toml
+++ b/retis/Cargo.toml
@@ -18,6 +18,9 @@ release_name = "pistou"
 [badges]
 maintenance = { status = "actively-developed" }
 
+[lints.rust]
+unexpected_cfgs = { level = "warn", check-cfg = ['cfg(test)'] }
+
 [features]
 default = ["python"]
 python = ["retis-derive/python", "events/python-embed"]
